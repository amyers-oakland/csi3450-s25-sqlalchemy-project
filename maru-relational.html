<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>maru-relational</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true });
  </script>
</head>
<body>
  <div class="mermaid">
erDiagram
  STUDENT {
    int     StudentID PK
    varchar FirstName
    varchar LastName
    date    DateOfBirth
    date    JoinDate
  }

  INSTRUCTOR {
    int   StudentID PK,FK
    date  StartDate
    string Status
  }

  CLASS {
    int     ClassID PK
    varchar Level
    varchar DayOfWeek
    time    Time
    varchar Location
    int     InstructorID FK
  }

  CLASS_MEETING {
    int  MeetingID PK
    date MeetingDate
    int  ClassID FK
  }

  CLASS_ATTENDANCE {
    int StudentID PK,FK
    int MeetingID PK,FK
  }

  INSTRUCTOR_ATTENDANCE {
    int    StudentID PK,FK
    int    MeetingID PK,FK
    string Role
  }

  RANK {
    int     RankID PK
    varchar RankName
    varchar BeltColor
  }

  RANK_REQUIREMENT {
    int RequirementID PK
    int RankID FK
    text RequirementDescription
  }

  STUDENT_RANK {
    int  StudentID PK,FK
    int  RankID PK,FK
    date DateAwarded
  }

  %% FK → PK relationships 
  INSTRUCTOR            }|..|| STUDENT           : "FK StudentID → PK"
  CLASS                 }|..|| INSTRUCTOR        : "FK InstructorID → PK"
  CLASS_MEETING         }|..|| CLASS             : "FK ClassID → PK"

  CLASS_ATTENDANCE      }|..|| STUDENT           : "FK StudentID → PK"
  CLASS_ATTENDANCE      }|..|| CLASS_MEETING     : "FK MeetingID → PK"

  INSTRUCTOR_ATTENDANCE }|..|| INSTRUCTOR        : "FK StudentID → PK"
  INSTRUCTOR_ATTENDANCE }|..|| CLASS_MEETING     : "FK MeetingID → PK"

  RANK_REQUIREMENT      }|..|| RANK              : "FK RankID → PK"

  STUDENT_RANK          }|..|| STUDENT           : "FK StudentID → PK"
  STUDENT_RANK          }|..|| RANK              : "FK RankID → PK"
  </div>
</body>
</html>
