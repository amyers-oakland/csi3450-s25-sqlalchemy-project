<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>maru-erd</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true });
  </script>
</head>
<body>
  <div class="mermaid">
erDiagram
  STUDENT {
    int     StudentID PK
    varchar FirstName
    varchar LastName
    date    DateOfBirth
    date    JoinDate
  }

  INSTRUCTOR {
    int   StudentID PK
    date  StartDate
    string Status
  }

  CLASS {
    int     ClassID PK
    varchar Level
    varchar DayOfWeek
    time    Time
    varchar Location
    int     InstructorID FK
  }

  CLASS_MEETING {
    int  MeetingID PK
    date MeetingDate
    int  ClassID FK
  }

  CLASS_ATTENDANCE {
    int StudentID PK,FK
    int MeetingID PK,FK
  }

  INSTRUCTOR_ATTENDANCE {
    int    StudentID PK,FK
    int    MeetingID PK,FK
    string Role
  }

  RANK {
    int     RankID PK
    varchar RankName
    varchar BeltColor
  }

  RANK_REQUIREMENT {
    int RequirementID PK
    int RankID FK
    text RequirementDescription
  }

  STUDENT_RANK {
    int  StudentID PK,FK
    int  RankID PK,FK
    date DateAwarded
  }

  %% Relationships
  STUDENT       ||..o{ INSTRUCTOR               : "is a"
  INSTRUCTOR    ||..o{ CLASS                    : "teaches"
  CLASS         }|..|| INSTRUCTOR               : "assigned to"

  CLASS         ||..o{ CLASS_MEETING            : "has meeting"
  CLASS_MEETING }|..|| CLASS                     : "of class"

  STUDENT       ||..o{ CLASS_ATTENDANCE         : "attends"
  CLASS_MEETING ||..o{ CLASS_ATTENDANCE         : "attended by"

  INSTRUCTOR    ||..o{ INSTRUCTOR_ATTENDANCE    : "helps at"
  CLASS_MEETING ||..o{ INSTRUCTOR_ATTENDANCE    : "has helper"

  RANK          ||..o{ RANK_REQUIREMENT         : "defines"
  RANK_REQUIREMENT }|..|| RANK                   : "for"

  STUDENT       ||..o{ STUDENT_RANK             : "earns"
  RANK          ||..o{ STUDENT_RANK             : "is earned by"
  </div>
</body>
</html>
