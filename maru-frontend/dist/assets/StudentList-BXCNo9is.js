import{r as s,j as t}from"./index-BGu0QCQO.js";function p({onSubmit:h,onCancel:r,initial:a}){const[i,u]=s.useState(a?.FirstName||""),[l,e]=s.useState(a?.LastName||""),[d,o]=s.useState(a?.DateOfBirth||""),[c,j]=s.useState(a?.JoinDate||"");function x(n){n.preventDefault(),h({FirstName:i,LastName:l,DateOfBirth:d,JoinDate:c})}return t.jsxs("form",{onSubmit:x,style:{marginTop:10},children:[t.jsx("input",{placeholder:"First name",value:i,onChange:n=>u(n.target.value),required:!0}),t.jsx("input",{placeholder:"Last name",value:l,onChange:n=>e(n.target.value),required:!0}),t.jsx("div",{style:{marginTop:6},children:t.jsxs("label",{children:["DOB ",t.jsx("input",{type:"date",value:d,onChange:n=>o(n.target.value),required:!0})]})}),t.jsx("div",{style:{marginTop:6},children:t.jsxs("label",{children:["Join ",t.jsx("input",{type:"date",value:c,onChange:n=>j(n.target.value),required:!0})]})}),t.jsxs("div",{style:{marginTop:8},children:[t.jsx("button",{type:"submit",children:"Save"})," ",t.jsx("button",{type:"button",onClick:r,children:"Cancel"})]})]})}function f(){const[h,r]=s.useState([]),[a,i]=s.useState(!1);s.useEffect(()=>{fetch("http://localhost:5000/api/getUsers").then(e=>e.json()).then(r).catch(()=>r([]))},[]);async function u(e){const o=await(await fetch("/api/students.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();r(c=>[o,...c]),i(!1)}async function l(e){confirm("Delete this student?")&&(await fetch(`/api/students.php?id=${e}`,{method:"DELETE"}),r(d=>d.filter(o=>o.StudentID!==e)))}return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{children:"Students"}),t.jsx("button",{onClick:()=>i(e=>!e),children:"+ Add"})]}),a&&t.jsx(p,{onSubmit:u,onCancel:()=>i(!1)}),t.jsxs("table",{style:{width:"100%",marginTop:10},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"DOB"}),t.jsx("th",{children:"Joined"}),t.jsx("th",{})]})}),t.jsx("tbody",{children:h.map(e=>t.jsxs("tr",{children:[t.jsx("td",{children:e.StudentID}),t.jsxs("td",{children:[e.FirstName," ",e.LastName]}),t.jsx("td",{children:e.DateOfBirth}),t.jsx("td",{children:e.JoinDate}),t.jsx("td",{children:t.jsx("button",{onClick:()=>l(e.StudentID),children:"Delete"})})]},e.StudentID))})]})]})}export{f as default};
